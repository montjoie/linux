# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/crypto/rockchip,rk3288-crypto.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Rockchip Electronics And Security Accelerator

maintainers:
  - Heiko Stuebner <heiko@sntech.de>

properties:
  compatible:
    oneOf:
      - description: crypto IP present on RK3288 SoCs
        items:
          - const: rockchip,rk3288-crypto
      - description: crypto IP present on RK3328 SoCs
        items:
          - const: rockchip,rk3328-crypto
      - description: crypto IPs present on RK3399. crypto0 is the first IP with
                     RSA support, crypto1 is the second IP without RSA.
        enum:
          - rockchip,rk3399-crypto0
          - rockchip,rk3399-crypto1

  reg:
    maxItems: 1

  interrupts:
    maxItems: 1

  clocks:
    minItems: 3
    maxItems: 4

  clock-names:
    minItems: 3
    maxItems: 4

  resets:
    minItems: 1
    maxItems: 3

  reset-names:
    deprecated: true

allOf:
  - if:
      properties:
        compatible:
          contains:
            const: rockchip,rk3288-crypto
    then:
      properties:
        clock-names:
          items:
            - const: "aclk"
            - const: "hclk"
            - const: "sclk"
            - const: "apb_pclk"
          minItems: 4
  - if:
      properties:
        compatible:
          contains:
            const: rockchip,rk3328-crypto
    then:
      properties:
        clock-names:
          items:
            - const: "hclk_master"
            - const: "hclk_slave"
            - const: "sclk"
          maxItems: 3
  - if:
      properties:
        compatible:
          contains:
            enum:
              - rockchip,rk3399-crypto0
              - rockchip,rk3399-crypto1
    then:
      properties:
        clock-names:
          items:
            - const: "hclk_master"
            - const: "hclk_slave"
            - const: "sclk"
          maxItems: 3
        resets:
          minItems: 3

required:
  - compatible
  - reg
  - interrupts
  - clocks
  - clock-names
  - resets

additionalProperties: false

examples:
  - |
    #include <dt-bindings/interrupt-controller/arm-gic.h>
    #include <dt-bindings/clock/rk3288-cru.h>
    crypto@ff8a0000 {
      compatible = "rockchip,rk3288-crypto";
      reg = <0xff8a0000 0x4000>;
      interrupts = <GIC_SPI 48 IRQ_TYPE_LEVEL_HIGH>;
      clocks = <&cru ACLK_CRYPTO>, <&cru HCLK_CRYPTO>,
               <&cru SCLK_CRYPTO>, <&cru ACLK_DMAC1>;
      clock-names = "aclk", "hclk", "sclk", "apb_pclk";
      resets = <&cru SRST_CRYPTO>;
      reset-names = "crypto-rst";
    };
